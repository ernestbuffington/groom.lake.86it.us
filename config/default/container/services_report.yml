services:
# ----- Report controller -----
    an602.report.controller:
        class: an602\report\controller\report
        arguments:
            - '@config'
            - '@user'
            - '@template'
            - '@controller.helper'
            - '@request'
            - '@captcha.factory'
            - '@an602.report.handler_factory'
            - '@an602.report.report_reason_list_provider'
            - '%core.root_path%'
            - '%core.php_ext%'

# ----- Report handler factory -----
    an602.report.handler_factory:
        class: an602\report\handler_factory
        arguments:
            - '@service_container'

# ----- Report UI provider -----
    an602.report.report_reason_list_provider:
        class: an602\report\report_reason_list_provider
        arguments:
            - '@dbal.conn.driver'
            - '@template'
            - '@user'

# ----- Report handlers -----
# Service MUST NOT be shared for all the handlers to work correctly.
    an602.report.handlers.report_handler_pm:
        class: an602\report\report_handler_pm
        shared: false
        arguments:
            - '@dbal.conn.driver'
            - '@dispatcher'
            - '@config'
            - '@auth'
            - '@user'
            - '@notification_manager'

    an602.report.handlers.report_handler_post:
        class: an602\report\report_handler_post
        shared: false
        arguments:
            - '@dbal.conn.driver'
            - '@dispatcher'
            - '@config'
            - '@auth'
            - '@user'
            - '@notification_manager'
